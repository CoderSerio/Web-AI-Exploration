from utils import format_data_from_frontend, predict
import tensorflow as tf

model = tf.keras.models.load_model(
    'packages/solutions/python-server/MobileNetV3.keras')
str = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAwADADASIAAhEBAxEB/8QAGwABAAIDAQEAAAAAAAAAAAAABAIDAQUHBgj/xAAtEAACAQMCBAQFBQAAAAAAAAABAgMABBESIQUxQVEGEyJhBxRCcaEjMoGxwf/EABcBAQEBAQAAAAAAAAAAAAAAAAMEAQX/xAAeEQADAAICAwEAAAAAAAAAAAAAAQIDESExBBJBE//aAAwDAQACEQMRAD8A+fJ2DbmsqhGPQ2ftTbOEzjTt5YORjvTmgjiGlI9b8zvii38GmdhbNtRCNlT0ztTmt2Kn1VTA4faSMLn6Sc0xTm2EZxk4Goj/AGjrhlErg1Ekah8BgTV1oPJmV+QprJAhVWXAOwOM0n5AAK6AnqpHL+aRA1P0xwfhuLPXndiaY1qqqdQOemBTeHoEtgg6E1e6AjOKmq2nsoxSjStaBiBGp1nuOVMisIWhA1g9Mg9am8ZYnHLBB+1RNrE0Ai0AKCGAG29Z+jrsX1RWlmqnDKQQe2a2drAgs5VGrzQPQMHFStkMjfqDfoa3nDbHVIuBzNLFvYeTGtbAcS4bdWFwRdwNEJAHTK41LjnRNNdz+Jvh48Q4H8zAmZrUasd16iuIbBsGjzRoPx8ioK9rJKfRJoXtioiymX9rhiPanhA31YFSWzwQyk59qGafR0E9Lor4cJGlMcqaSOvevYcBtWkmWNQdRBrR2NsWkH5NdC8F2oWWS5cbKuhfcnn+P7qnGtsmz2lLP//Z'
nd_array = format_data_from_frontend(str)

res = predict(model, nd_array)
print(res)
